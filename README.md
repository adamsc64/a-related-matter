# A Related Matter: Optimizing Your Web App with `django-debug-toolbar`, `select_related()`, and `prefetch_related()`

## Presented by Christopher Adams
**DjangoCon 2024**

---

## Overview

This repository is a paired with my DjangoCon talk, demonstrating how to use `django-debug-toolbar` to optimize a Django web application. The goal of the talk is to explain how to make use of Django ORM methods like `select_related()` and `prefetch_related()`.

---

## Prerequisites

- **Docker Compose**: This project uses Docker for easy setup and environment consistency.

---

## Quick Start Guide

Follow these steps to set up and run the project:

### 1. Start the Services

Use Docker Compose to start the database and web services in detached mode:

```bash
docker compose up -d
```

### 2. Run Database Migrations

Apply the database migrations to create the necessary tables:

```bash
docker compose run web python manage.py migrate
```

### 3. Load Fixture Data

Load the sample data provided:

```bash
docker compose run web python manage.py loaddata blog/fixtures/fixture.json
```

### 4. Access the Application

Once the services are running, access the webapp:

```
http://127.0.0.1:8000
```

### 5. Explore the SQL Queries

Take a look at the Debug Toolbar on the right. Check out the SQL queries generated by visiting a blog page, e.g. `/blog/1`. This will help you visualize the number of queries being made, and how they change when optimizations are applied.

### 6. Toggle Optimizations

To see the optimizations discussed in my DjangoCon talk (`select_related()` and `prefetch_related()`), add the `?optimized=true` parameter to the URL:

```
http://127.0.0.1:8000/blog/1/?optimized=true
```

This will show how the optimizations reduce the number of SQL queries and improve performance.

---

## Additional Notes

- **Debugging**: The project uses `django-debug-toolbar` for visualizing SQL queries and performance bottlenecks.
- **Optimizations**: The `?optimized=true` parameter applies optimizations using Djangoâ€™s `select_related()` and `prefetch_related()` methods to efficiently retrieve related data with fewer queries.

---

You'll be able to see how these ORM optimizations can reduce the number of queries of your Django application, as discussed during the DjangoCon 2024 session.
